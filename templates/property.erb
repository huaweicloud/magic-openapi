<%
  data_type = Hash[
    "string" => "- !ruby/object:Api::Type::String",
    "boolean" => "- !ruby/object:Api::Type::Boolean",
    "integer" => "- !ruby/object:Api::Type::Integer",
    "array" => "- !ruby/object:Api::Type::Array",
    "object" => "- !ruby/object:Api::Type::NestedObject",
  ]
  dict_type = Hash[
    "string" => "Api::Type::String",
    "boolean" => "Api::Type::Boolean",
    "integer" => "Api::Type::Integer",
    "array" => "Api::Type::Array",
  ]
  array_type = Hash[
    "string" => "- !ruby/object:Api::Type::String",
    "object" => "- !ruby/object:Api::Type::NestedObject",
  ]
-%>
- !ruby/object:Api::Resource
    name: '<%= resource_name %>'
    kind: 'compute#<%= resource_name.downcase %>'
    base_url: <%= base_url %>
    description: '<%= description %>'
<% if not parameters.empty? -%>
    parameters:
<% end -%>
<% parameters.each do |key, value| -%>
<% if value['title'] == 'Dict' -%>
      - !ruby/object:Api::Type::NameValues
<% else -%>
      <%= data_type[value['type']] %>
<% end -%>
      name: '<%= key %>'
      description: '<%= value['description'] %>'
<% if required.include? key -%>
      required: true
<% end -%>
<% if value['title'] == 'Dict' -%>
      key_type: <%= dict_type["string"] %>
<% if value['additionalProperties'] -%>
      value_type: <%= dict_type[value['additionalProperties']['type']] %>
<% else -%>
      value_type: <%= dict_type["string"] %>
<% end -%>
<% end -%>
<% if value['type'] == 'object' and not value['properties'].nil? -%>
<%= lines(build_nested_object_property(value['properties'])) -%>
<% end -%>
<% if value['type'] == 'array' -%>
<%
  itype = value['items']['type']
  props = value['items']['properties']
-%>
      item_type: <%= array_type[itype] %>
<% if itype == 'object' -%>
<%= lines(build_nested_object_property(props)) -%>
<% end -%>
<% end -%>
<% end -%>
<% if not properties.empty? -%>
    properties:
<% end -%>
<% properties.each do |key, value| -%>
<% if value['title'] == 'Dict' -%>
      - !ruby/object:Api::Type::NameValues
<% else -%>
      <%= data_type[value['type']] %>
<% end -%>
      name: '<%= key %>'
      description: '<%= value['description'] %>'
<% if required.include? key -%>
      required: true
<% end -%>
<% if output.include? key -%>
      output: true
<% end -%>
<% if value['title'] == 'Dict' -%>
      key_type: <%= dict_type["string"] %>
<% if value['additionalProperties'] -%>
      value_type: <%= dict_type[value['additionalProperties']['type']] %>
<% else -%>
      value_type: <%= dict_type["string"] %>
<% end -%>
<% end -%>
<% if value['type'] == 'object' and not value['properties'].nil? -%>
<%= lines(build_nested_object_property(value['properties'])) -%>
<% end -%>
<% if value['type'] == 'array' -%>
<%
  itype = value['items']['type']
  props = value['items']['properties']
-%>
      item_type: <%= array_type[itype] %>
<% if itype == 'object' -%>
<%= lines(build_nested_object_property(props)) -%>
<% end -%>
<% end -%>
<% end -%>
